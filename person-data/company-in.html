<div class="page-cont">
    <div class="company-in dialog-box">
        <div class="company-desc">
            <h3>轻松3步入驻青瓜通，成为我们的合作伙伴</h3>
            <p>温馨提示：请根据公司实际业务选择模板，否则会被拖入回收站哦~</p>
        </div>
        <div class="steps">
            <div class="step step-active" data-step="1">
                <span class="step-number">1</span>
                <img src="images/check2.png" />
                <p>选择模板</p>
                <div class="step-line"></div>
            </div>
            <div class="step" data-step="2">
                <span class="step-number">2</span>
                <img src="images/check2.png" />
                <p>公司信息</p>
                <div class="step-line"></div>
            </div>
            <div class="step" data-step="3">
                <span class="step-number">3</span>
                <img src="images/check2.png" />
                <p>联系信息</p>
            </div>
        </div>
        <div class="company-cont">
            <div class="company-step-one company-step " data-step="1">
                <div class="company-modal">
                    <div class="modal-box modal-box-active" data-type="0">
                        <div class="modal-left">
                            <h3>品牌企业（甲方）</h3>
                            <p>具有自主品牌的企业</p>
                            <p>如传统企业、互联网公司等</p>
                        </div>
                        <div class="modal-right">
                            <img src="images/first.png" />
                        </div>
                    </div>
                    <div class="modal-box" data-type="1">
                        <div class="modal-left">
                            <h3>营销供应商（乙方）</h3>
                            <p>提供营销服务的机构,</p>
                            <p>如广告、媒体、公关、会展、技术等</p>
                        </div>
                        <div class="modal-right">
                            <img src="images/scend.png" />
                        </div>
                    </div>
                </div>
                <div style="display:flex; justify-content: center;">
                    <div class="modal-btn-next btn-one" data-step="1">
                        下一步
                    </div>
                </div>
            </div>
            <div class="company-step-two company-step is-none" data-step="2">
                <form class="layui-form" action="" data-type="0">
                    <div class="layui-form-item">
                        <label class="layui-form-label required">公司简称</label>
                        <div class="layui-input-block" style="width: 550px;">
                            <input type="text" lay-verify="required" lay-verType="tips" placeholder="请输入希望加入的公司简称或品牌名称，如：青瓜传媒"
                                class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label required">公司全称</label>
                        <div class="layui-input-block" style="width: 550px;">
                            <input type="text" lay-verify="required" lay-verType="tips"  placeholder="请填写公司营业执照的注册名称，如：厦门青瓜信息科技有限公司"
                                class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label required">所属行业</label>
                        <div class="layui-input-block" style="width: 410px;">
                            <select name="quiz1" lay-verify="required"  lay-verType="tips" >
                                <option value="">请选择</option>
                                <option value="互联网" selected="">互联网</option>
                                <option value="金融">金融</option>
                                <option value="其他">其他</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-form-item" id="area-picker2">
                        <label class="layui-form-label required">公司所在地</label>
                        <div class="layui-input-inline" style="width: 200px;">
                            <select name="province" lay-verify="required"  lay-verType="tips"  class="province-selector" data-value="广东省"
                                lay-filter="province-1">
                                <option value="">请选择省</option>
                            </select>
                        </div>
                        <div class="layui-input-inline" style="width: 200px;">
                            <select name="city" lay-verify="required"  lay-verType="tips"  class="city-selector" data-value="深圳市"
                                lay-filter="city-1">
                                <option value="">请选择市</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-form-item ">
                        <label class="layui-form-label">详细地址</label>
                        <div class="layui-input-block" style="width: 550px;">
                            <input type="text" autocomplete="off" placeholder="请填写"
                                class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">公司网址</label>
                        <div class="layui-input-block" style="width: 550px;">
                            <input type="text" autocomplete="off" placeholder="请填写"
                                class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label required">需求描述</label>
                        <div class="layui-input-block">
                            <textarea lay-verify="required"  lay-verType="tips" 
                                placeholder="为了提高合作对接的效率，请尽可能详细描述您的需求，包括但不限于项目背景、当前问题、其他个性化需求等。500字以内"
                                class="layui-textarea"></textarea>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">相关照片</label>
                        <div class="layui-input-block">
                            <div style="display: flex;align-items: center;">
                                <div class="layui-upload-drag" id="aboutPhoto">
                                    <img src="/images/add.png" />
                                    <div class="layui-hide" id="uploadDemoView">
                                        <hr>
                                        <img src="" alt="上传成功后渲染" style="max-width: 196px">
                                    </div>
                                </div>
                                <div id="aboutPhotoBox" style="display: flex;align-items: center;"></div>
                            </div>
                            <p class="upload-desc">（支持.jpg/.png 格式，最多3张，图中不能带有联系方式,不能超过200kb)</p>
                        </div>
                    </div>
                    <div style="display:flex; justify-content: center;">
                        <div class="modal-btn-next" data-step="0"
                            style="margin-right: 10px;background-color: #fff;border: 1px solid #ccc; color: #333;">上一步
                        </div>
                        <div class="btn-next" data-step="2" lay-filter="demo1" lay-submit="">下一步</div>
                    </div>
                </form>
                <form style="display: none;" class="layui-form" action="" data-type="1">
                    <div class="layui-form-item">
                        <label class="layui-form-label required">公司简称</label>
                        <div class="layui-input-inline" style="width: 550px;">
                            <input type="text" lay-verify="required" lay-verType="tips"
                                placeholder="请输入希望加入的公司简称或品牌名称，如：青瓜传媒" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label required">公司全称</label>
                        <div class="layui-input-block" style="width: 550px;">
                            <input type="text" lay-verify="required" lay-verType="tips"
                                placeholder="请填写公司营业执照的注册名称，如：厦门青瓜信息科技有限公司" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label required">成立时间</label>
                        <div class="layui-input-block" style="width: 253px;">
                            <input type="text" lay-verify="required" lay-verType="tips" placeholder="请输入"
                                class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label required">公司规模</label>
                        <div class="layui-input-block" style="width: 253px;">
                            <select name="quiz1" lay-verify="required" lay-verType="tips">
                                <option value="">请选择</option>
                                <option value="小于50人" selected="">小于50人</option>
                                <option value="50~100人">50~100人</option>
                                <option value="100~1000人">100~1000人</option>
                                <option value="大于1000人">大于1000人</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label required">公司分类</label>
                        <div class="layui-input-block" style="width: 410px;">
                            <select name="quiz1" lay-verify="required" lay-verType="tips">
                                <option value="">请选择</option>
                                <option value="互联网" selected="">互联网</option>
                                <option value="金融行业">金融行业</option>
                                <option value="其他">其他</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-form-item w550" id="area-picker">
                        <label class="layui-form-label required">公司所在地</label>
                        <div class="layui-input-inline" style="width: 200px;">
                            <select name="province" class="province-selector" lay-verify="required" lay-verType="tips" data-value="广东省" lay-filter="province-1">
                                <option value="">请选择省</option>
                            </select>
                        </div>
                        <div class="layui-input-inline" style="width: 200px;">
                            <select name="city" class="city-selector" lay-verify="required" lay-verType="tips" data-value="深圳市" lay-filter="city-1">
                                <option value="">请选择市</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">详细地址</label>
                        <div class="layui-input-block" style="width: 550px;">
                            <input type="text" lay-verify="required"  lay-verType="tips"  autocomplete="off" placeholder="请输入"
                                class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">公司网址</label>
                        <div class="layui-input-block" style="width: 550px;">
                            <input type="text" lay-verify="required"  lay-verType="tips"  autocomplete="off" placeholder="请输入"
                                class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label required">公司介绍</label>
                        <div class="layui-input-block">
                            <textarea placeholder="为了提高合作对接的效率，请尽可能详细描述您的需求，包括但不限于项目背景、当前问题、其他个性化需求等。500字以内"
                                class="layui-textarea" lay-verify="required" lay-verType="tips"></textarea>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">品牌LOGO</label>
                        <div class="layui-input-block">
                            <div style="display: flex;align-items: center;">
                                <div class="layui-upload-drag" id="logo">
                                    <img src="/images/add.png" />
                                    <div class="layui-hide" id="uploadDemoView">
                                        <hr>
                                        <img src="" alt="上传成功后渲染" style="max-width: 196px">
                                    </div>
                                </div>
                                <div id="logoBox" style="display: flex;align-items: center;"></div>
                            </div>
                            <p class="upload-desc">（支持.jpg/.png 格式，最多3张，图中不能带有联系方式,不能超过200kb)</p>
                        </div>
                    </div>
                    <div style="display:flex; justify-content: center;">
                        <div class="modal-btn-next" data-step="0"
                            style="margin-right: 10px;background-color: #fff;border: 1px solid #ccc; color: #333;">上一步
                        </div>
                        <div class="btn-next" data-step="2"  lay-filter="demo1" lay-submit="">下一步</div>
                    </div>
                </form>

            </div>
            <div class="company-step-three company-step is-none" data-step="3">
                <div class="contact">
                    <div class="join-company" data-type="0">
                        <h3 class="green-bor-title" style="margin-bottom: 20px;">加入公司</h3>
                    </div>
                    <div class="contact-info">
                        <form class="layui-form" action="">
                            <div class="layui-form-item w550" style="margin-bottom: 64px;">
                                <label class="layui-form-label required">公司简称</label>
                                <div class="layui-input-block">
                                    <input type="text" lay-verify="required"  lay-verType="tips" autocomplete="off"
                                        placeholder="请输入" class="layui-input">
                                </div>
                            </div>
                            <h3 class="green-bor-title" style="margin-bottom: 20px;">联系信息</h3>
                            <div class="layui-form-item ">
                                <label class="layui-form-label required">姓名</label>
                                <div class="layui-input-block w175">
                                    <input type="text" lay-verify="required"  lay-verType="tips"  autocomplete="off"
                                        placeholder="请输入" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item  ">
                                <label class="layui-form-label required">所在部门</label>
                                <div class="layui-input-block w175">
                                    <input type="text" lay-verify="required"  lay-verType="tips"  autocomplete="off"
                                        placeholder="请输入" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item  ">
                                <label class="layui-form-label required">职位</label>
                                <div class="layui-input-block w175">
                                    <input type="text" lay-verify="required"  lay-verType="tips"  autocomplete="off"
                                        placeholder="请输入" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item  ">
                                <label class="layui-form-label required">手机号码</label>
                                <div class="layui-input-block w175">
                                    <input type="text" lay-verify="required"  lay-verType="tips"  autocomplete="off"
                                        placeholder="请输入" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label required">联系方式</label>
                                <div class="layui-input-block lxfs-box" style="width: 565px;">
                                    <div class="lxfs">

                                        <div class="lxfs-item">
                                            <img src="/images/wechat.png" />
                                            <input type="text" lay-verify="required"  lay-verType="tips"  autocomplete="off"
                                                placeholder="微信" class="layui-input">
                                        </div>
                                        <div class="lxfs-item">
                                            <img src="/images/qq.png" />
                                            <input type="text" lay-verify="required"  lay-verType="tips"  autocomplete="off"
                                                placeholder="QQ"" class=" layui-input">
                                        </div>
                                        <div class="lxfs-item">
                                            <img src="/images/email.png" />
                                            <input type="text" lay-verify="required"  lay-verType="tips"  autocomplete="off"
                                                placeholder="电子邮箱" class="layui-input">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div style="display:flex; justify-content: center;">
                                <div class="modal-btn-next" data-step="1"
                                    style="margin-right: 10px;background-color: #fff;border: 1px solid #ccc; color: #333;">上一步
                                </div>
                                <div class="btn-next" data-step="last"  lay-filter="last" lay-submit="">确认提交</div>
                            </div>
                        </form>
                    </div>
                    <!-- <div style="display:flex; justify-content: center;">
                        <div class="modal-btn-next" data-step="1"
                            style="margin-right: 10px;background-color: #fff;border: 1px solid #ccc; color: #333;">上一步
                        </div>
                        <div class="modal-btn-next" data-step="last">确认提交</div>
                    </div> -->
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $(function () {
        //配置插件目录
        layui.config({
            base: './mods/'
            , version: '1.0'
        });
        layui.use(['form', 'upload', 'layarea'], function () {
            var form = layui.form;
            var upload = layui.upload;
            var layarea = layui.layarea;
            var pass = true;
            var upOrDown = 'up'
            var currType = 0; //0当前为甲方 1为乙方
            //下一步按钮点击
            // $('body').undelegate('.modal-btn-next','click').delegate('.modal-btn-next','click',function(){

            // })
            layarea.render({
                elem: '#area-picker',
                change: function (res) {
                    //选择结果
                    console.log(res);
                }
            });


            layarea.render({
                elem: '#area-picker2',
                change: function (res) {
                    //选择结果
                    console.log(res);
                }
            })

             //表单验证
             form.on('submit(last)', function (data) {
                pass = false;
                // return false;
            });

            //表单验证
            form.on('submit(demo1)', function (data) {
                pass = false;
                doShowContanier(2)
                setSteps(2)
                // return false;
            });


            $('.modal-btn-next').on('click', function () {
                upOrDown = $(this).text().trim() == '上一步'?'up':'down'
                let step = $(this).data('step')
                if (step !== 'last') {
                    doShowContanier(step)
                }
                setSteps(step)
            })

            //控制显示隐藏当前第几部
            function doShowContanier(step) {
                if(step === 1){
                    $('form','.company-step-two').each(function(){
                        $(this).css('display','none')
                        if($(this).data('type') == currType){
                            $(this).css('display','block')
                        }
                    })
                }
                $('.company-step').each(function () {
                    let idx = $(this).data('step')
                    $(this).addClass('is-none')
                    if (idx === step + 1) {
                        $(this).removeClass('is-none')
                    }
                })
            }

            //控制顶上步骤条
            function setSteps(step) {
                $('.step', '.steps').each(function () {
                    $(this).removeClass('step-active')
                    if(upOrDown == 'up'){
                        $(this).removeClass('has-active')
                    }
                    
                    let idx = $(this).data('step');
                    step = step === 'last' ? 3 : step
                    step === idx && $(this).addClass('has-active')
                    if (step !== 3)
                        step + 1 === idx && $(this).addClass('step-active')
                })
            }

            //多图片上传
            upload.render({
                elem: '#logo'
                , url: 'https://httpbin.org/post' //改成您自己的上传接口
                , multiple: true
                , before: function (obj) {
                    //预读本地文件示例，不支持ie8
                    obj.preview(function (index, file, result) {
                        let html = `
                            <div class="upload-img__box">
                                <span class="work-img-mask">
                                    <img src="/images/delete.png" />    
                                </span>
                                <img src="${result}" alt="${file.name}" class="layui-upload-img" style="max-width:100%;" />
                            </div>`
                        $('#logoBox').append(html)
                    });
                }
                , done: function (res) {
                    //上传完毕
                }
            });

            //删除图片
            $('#logoBox').undelegate('.work-img-mask', 'click').delegate('.work-img-mask', 'click', function () {
                let targetDom = $(this).parent('.upload-img__box');
                layer.confirm('是否删除工作证明？', {
                    title: '提示',
                    btn: ['确定', '取消'] //按钮
                }, function (index) {
                    targetDom.remove();
                    layer.close(index)
                }, function () {
                    //cancel
                });
            })

            //删除图片
            $('#aboutPhotoBox').undelegate('.work-img-mask', 'click').delegate('.work-img-mask', 'click', function () {
                let targetDom = $(this).parent('.upload-img__box');
                layer.confirm('是否删除工作证明？', {
                    title: '提示',
                    btn: ['确定', '取消'] //按钮
                }, function (index) {
                    targetDom.remove();
                    layer.close(index)
                }, function () {
                    //cancel
                });
            })

            //多图片上传
            upload.render({
                elem: '#aboutPhoto'
                , url: 'https://httpbin.org/post' //改成您自己的上传接口
                , multiple: true
                , before: function (obj) {
                    //预读本地文件示例，不支持ie8
                    obj.preview(function (index, file, result) {
                        let html = `
                            <div class="upload-img__box">
                                <span class="work-img-mask">
                                    <img src="/images/delete.png" />    
                                </span>
                                <img src="${result}" alt="${file.name}" class="layui-upload-img" style="max-width:100%;" />
                            </div>`
                        $('#aboutPhotoBox').append(html)
                    });
                }
                , done: function (res) {

                }
            });

            //选择品牌
            $('.modal-box', '.company-cont').on('click', function () {
                $(this).addClass('modal-box-active').siblings().removeClass('modal-box-active')
                currType = $(this).data('type')
            })
            form.render('select')

        })
    })
</script>